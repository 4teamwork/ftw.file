!function(e){"function"==typeof define&&define.amd?require(["jquery"],e):e(window.jQuery)}(function(e){e("#form-widgets-file input[type=radio]").change(function(){display=e("input#form-widgets-file-replace").is(":checked")?"none":"",e("#formfield-form-widgets-filename_override").css("display",display)})}),define("hideOverrideFilenameField",function(){}),function(e,n){"function"==typeof define&&define.amd?define("progress",[],n):e.progress=n()}("undefined"!=typeof self?self:this,function(){var e={},n=0,t=null,a=null,o=null,r=null,l={colors:{barColor:"#75ad0a",backColor:"#000000"},templates:{barGtHalf:"linear-gradient($nextdeg, $barColor 50% , transparent 50% , transparent),linear-gradient(270deg, $barColor 50% , $backColor 50% , $backColor)",barStHalf:"linear-gradient(90deg, $backColor 50% , transparent 50% , transparent),linear-gradient($nextdeg, $barColor 50% , $backColor 50% , $backColor)"}},i=function(e){if(!e)throw"InvalidArgumentException: "+e;d(e),s(n)},d=function(e){t=document.getElementById(e),a=document.createElement("div"),a.className="overlay",o=document.createElement("img"),o.id="tick",o.src="++resource++ftw.file.resources/tick.png",r=document.createElement("img"),r.id="fail",r.src="++resource++ftw.file.resources/fail.svg",t.appendChild(a),t.appendChild(o),t.appendChild(r),l.templates.barStHalf=l.templates.barStHalf.replace(/\$backColor/g,l.colors.backColor),l.templates.barStHalf=l.templates.barStHalf.replace(/\$barColor/g,l.colors.barColor),l.templates.barGtHalf=l.templates.barGtHalf.replace(/\$backColor/g,l.colors.backColor),l.templates.barGtHalf=l.templates.barGtHalf.replace(/\$barColor/g,l.colors.barColor)},s=function(e){if(!e&&0!==e)return n;if(isNaN(e))throw"InvalidArgumentException: "+e;if((e=Math.abs(Math.round(e)))>100)throw"InvalidArgumentException: "+e+" is larger than 100";n=e;var o;n<50?(o=90+3.6*n,t.style.backgroundImage=l.templates.barStHalf.replace("$nextdeg",o+"deg")):(o=3.6*(n-50)-90,t.style.backgroundImage=l.templates.barGtHalf.replace("$nextdeg",o+"deg")),a.innerHTML=n+"%"},f=function(){o.style.display="block"},u=function(){r.style.display="block"},c=function(){o.style.display="none",r.style.display="none",m(),n=0,s(n)},p=function(){t.style.display="inline-block"},m=function(){t.style.display="none"};return e.init=i,e.value=s,e.done=f,e.reset=c,e.show=p,e.hide=m,e.failure=u,e}),function(e,n){"function"==typeof define&&define.amd?require(["jquery","progress"],n):n(e.jQuery,e.progress)}("undefined"!=typeof self?self:this,function(e,n){var t=null,a=0,o=!1,r=!1,l=null,i=null,d=null,s={filereader:null,dnd:null,formdata:null,progress:null},f=function(a){var l=s.formdata?new FormData:null;reset(),n.show(),t.className="uploading",s.formdata&&(l.append("file",a),l.append("_authenticator",e('#dropzone [name="_authenticator"').val()),d=new XMLHttpRequest,d.open("POST",context_url+"/ajax-upload"),d.onload=function(){n.value(0)},s.progress&&(d.upload.onprogress=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100|0;n.value(t)}}),d.onreadystatechange=function(){4==d.readyState&&200==d.status?(t.className="done",o=!0,n.done(),window.setTimeout(function(){p()},1e3)):4==d.readyState&&200!=d.status&&(t.className="fail",r=!0,n.failure(),window.setTimeout(function(){window.location.reload()},1e3))},d.send(l))},u=function(){s.dnd&&(e(document).on("dragenter",function(n){-1!==e.inArray("Files",n.dataTransfer.types)&&(a++,l.overlay().load(),n.preventDefault())}).on("dragleave",function(e){0===--a&&m()}).on("dragover",function(e){e.preventDefault()}),e(t).on("dragover",function(e){this.className=o?"done hover":"hover",this.className=r?"fail hover":"hover",e.preventDefault()}).on("dragleave",function(){this.className=o?"done":"",this.className=r?"fail":""}),document.addEventListener("drop",function(n){n.preventDefault(),$target=e(n.target),$target.is(e(t))||$target.parent().is(e(t))||m()}),t.addEventListener("drop",function(n){e(this).className="",f(n.dataTransfer.files[0]),n.preventDefault()}))},c=function(){null!==(t=document.getElementById("dropzone"))&&(e.event.props.push("dataTransfer"),i=e("#dnd-file-replacement-hint"),n.init("uploadprogress"),s.filereader=!!window.FileReader,s.dnd="draggable"in document.createElement("span"),s.formdata=!!window.FormData,s.progress="upload"in new XMLHttpRequest,l=null,s.filereader&&s.dnd&&s.formdata||i.hide(),l=e("#dropzone").overlay({top:80,mask:{maskId:"upload-overlay",color:"#ededf1",opacity:.94},onClose:reset}),u())},p=function(){e(".fileListing").empty();var n=e.get(context_url+"/file_view");n.done(function(n){var t=e(n),a=e(".fileListing"),o=e("table.contentHistory");a.empty(),a.html(e(".fileListing tbody",t)),o.length>0&&(e(o).empty(),o.html(e("table.contentHistory thead, table.contentHistory tbody",t))),e(document).trigger("dndUploadViewUpdated",[t])}),n.fail(function(e){window.location.reload()}),n.always(function(e){m()})},m=function(){l.overlay().close()};reset=function(){t.className="",n.reset(),o=!1,r=!1,a=0,null!==d&&(d.abort(),d=null)},e(c)}),define("uploader",function(){}),require(["hideOverrideFilenameField","progress","uploader"],function(e,n,t){}),define("main-bundle",function(){});