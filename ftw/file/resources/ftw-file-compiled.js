!function(e){"function"==typeof define&&define.amd?require(["jquery"],e):e(window.jQuery)}(function(e){e("#form-widgets-file input[type=radio]").change(function(){display=e("input#form-widgets-file-replace").is(":checked")?"none":"",e("#formfield-form-widgets-filename_override").css("display",display)})}),define("hideOverrideFilenameField",function(){}),function(e,n){"function"==typeof define&&define.amd?define("progress",[],n):e.progress=n()}("undefined"!=typeof self?self:this,function(){var e={},n=0,t=null,a=null,o=null,r=null,l={colors:{barColor:"#75ad0a",backColor:"#000000"},templates:{barGtHalf:"linear-gradient($nextdeg, $barColor 50% , transparent 50% , transparent),linear-gradient(270deg, $barColor 50% , $backColor 50% , $backColor)",barStHalf:"linear-gradient(90deg, $backColor 50% , transparent 50% , transparent),linear-gradient($nextdeg, $barColor 50% , $backColor 50% , $backColor)"}},i=function(e){if(!e)throw"InvalidArgumentException: "+e;d(e),s(n)},d=function(e){t=document.getElementById(e),a=document.createElement("div"),a.className="overlay",o=document.createElement("img"),o.id="tick",o.src="++resource++ftw.file.resources/tick.png",r=document.createElement("img"),r.id="fail",r.src="++resource++ftw.file.resources/fail.svg",t.appendChild(a),t.appendChild(o),t.appendChild(r),l.templates.barStHalf=l.templates.barStHalf.replace(/\$backColor/g,l.colors.backColor),l.templates.barStHalf=l.templates.barStHalf.replace(/\$barColor/g,l.colors.barColor),l.templates.barGtHalf=l.templates.barGtHalf.replace(/\$backColor/g,l.colors.backColor),l.templates.barGtHalf=l.templates.barGtHalf.replace(/\$barColor/g,l.colors.barColor)},s=function(e){if(!e&&0!==e)return n;if(isNaN(e))throw"InvalidArgumentException: "+e;if((e=Math.abs(Math.round(e)))>100)throw"InvalidArgumentException: "+e+" is larger than 100";n=e;var o;n<50?(o=90+3.6*n,t.style.backgroundImage=l.templates.barStHalf.replace("$nextdeg",o+"deg")):(o=3.6*(n-50)-90,t.style.backgroundImage=l.templates.barGtHalf.replace("$nextdeg",o+"deg")),a.innerHTML=n+"%"},f=function(){o.style.display="block"},u=function(){r.style.display="block"},c=function(){o.style.display="none",r.style.display="none",m(),n=0,s(n)},p=function(){t.style.display="inline-block"},m=function(){t.style.display="none"};return e.init=i,e.value=s,e.done=f,e.reset=c,e.show=p,e.hide=m,e.failure=u,e}),function(e,n){"function"==typeof define&&define.amd?require(["jquery","progress"],n):n(e.jQuery,e.progress)}("undefined"!=typeof self?self:this,function(e,n){var t=null,a=null,o=0,r=!1,l=!1,i=null,d=null,s=null,f={filereader:null,dnd:null,formdata:null,progress:null},u=function(o){var i=f.formdata?new FormData:null;reset(),n.show(),t.className="uploading",f.formdata&&(i.append("file",o),i.append("_authenticator",e('#dropzone [name="_authenticator"]',a).val()),s=new XMLHttpRequest,s.open("POST",context_url+"/ajax-upload"),s.onload=function(){n.value(0)},f.progress&&(s.upload.onprogress=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100|0;n.value(t)}}),s.onreadystatechange=function(){4==s.readyState&&200==s.status?(t.className="done",r=!0,n.done(),window.setTimeout(function(){m()},1e3)):4==s.readyState&&200!=s.status&&(t.className="fail",l=!0,n.failure(),window.setTimeout(function(){window.location.reload()},1e3))},s.send(i))},c=function(){f.dnd&&(e(document).on("dragenter",function(n){-1!==e.inArray("Files",n.dataTransfer.types)&&(o++,i.overlay().load(),n.preventDefault())}).on("dragleave",function(e){0===--o&&g()}).on("dragover",function(e){e.preventDefault()}),e(t).on("dragover",function(e){this.className=r?"done hover":"hover",this.className=l?"fail hover":"hover",e.preventDefault()}).on("dragleave",function(){this.className=r?"done":"",this.className=l?"fail":""}),document.addEventListener("drop",function(n){n.preventDefault(),$target=e(n.target),$target.is(e(t))||$target.parent().is(e(t))||g()}),t.addEventListener("drop",function(n){e(this).className="",u(n.dataTransfer.files[0]),n.preventDefault()}))},p=function(){null!==(t=document.querySelector("body.portaltype-ftw-file-file #dropzone"))&&(a=e(t).parent(),e.event.props.push("dataTransfer"),d=e("#dnd-file-replacement-hint",a),n.init("uploadprogress"),f.filereader=!!window.FileReader,f.dnd="draggable"in document.createElement("span"),f.formdata=!!window.FormData,f.progress="upload"in new XMLHttpRequest,i=null,f.filereader&&f.dnd&&f.formdata||d.hide(),i=e(t).overlay({top:80,mask:{maskId:"upload-overlay",color:"#ededf1",opacity:.94},onClose:reset}),c())},m=function(){e(".fileListing",a).empty();var n=e.get(context_url+"/file_view");n.done(function(n){var t=e(n),o=e(".fileListing",a),r=e("table.contentHistory");o.empty(),o.html(e(".fileListing tbody",t)),r.length>0&&(e(r).empty(),r.html(e("table.contentHistory thead, table.contentHistory tbody",t))),e(document).trigger("dndUploadViewUpdated",[t])}),n.fail(function(e){window.location.reload()}),n.always(function(e){g()})},g=function(){i.overlay().close()};reset=function(){t.className="",n.reset(),r=!1,l=!1,o=0,null!==s&&(s.abort(),s=null)},e(p)}),define("uploader",function(){}),require(["hideOverrideFilenameField","progress","uploader"],function(e,n,t){}),define("main-bundle",function(){});