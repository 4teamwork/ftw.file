<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      i18n:domain="ftw.file">

    <head>
        <link rel="stylesheet" type="text/css" media="screen"
              href="https://fast.fonts.net/cssapi/05ba7042-9884-4870-9fe8-095c4f2e9cc6.css" />
        <link rel="stylesheet" type="text/css" media="screen"
              href="++resource++ftw.file-preview.css"/>
    </head>

    <body>

        <div class="sidebar">
            <div class="file-details"
                 tal:define="file_info view/get_file_info;
                             actions view/actions">

                <!-- Detail information -->
                <h3  tal:content="here/Title">Title</h3>
                <div class="filedata discreet">
                    <span tal:content="file_info/mimetype_title" />
                    &mdash;
                    <span tal:content="file_info/filesize" />
                </div>

                <div class="discreet"
                     i18n:translate="file_metadata_dates">
                    Modified
                    <span tal:replace="python:here.toLocalizedTime(context.modified())"
                          i18n:name="file_metadata_modified" />,
                    created
                    <span tal:replace="python:here.toLocalizedTime(context.created())"
                          i18n:name="file_metadata_created" />
                </div>
                <!-- End detail information -->

                <!-- Edit Actions -->
                <tal:actions repeat="action view/actions">
                    <a tal:attributes="href action/url; target action/target; class action/cssclass">
                        <tal:image condition="action/image">
                            <img tal:attributes="src action/image/src;
                                                 title action/image/title;
                                                 alt action/image/alt;
                                                 class action/image/cssclass" />
                             </tal:image>
                        <span tal:content="action/text">link text</span>
                    </a>
                </tal:actions>
                <!-- End actions -->
            </div>

            <div class="journal">
                <b i18n:translate="file_metadata_journal_heading">Journal</b>

                <div class="journal-item" tal:repeat="item view/get_journal">
                    <div class="journal-item-actor">
                        <tal:ACTOR tal:define="actor item/actor" tal:condition="actor">
                            <img tal:attributes="src string:${actor/portrait_url}?size=30;
                                                 title actor/fullname"
                                 border="0" />
                        </tal:ACTOR>
                    </div>

                    <a class="journal-item-download"
                       tal:condition="item/downloadable_version"
                       tal:attributes="href string:${context/absolute_url}/file_download_version?version_id=${item/version_id}">
                        <img tal:attributes="src string:${resource}/download.png"
                             title="Download this version"
                             i18n:attributes="title file_metadata_download_version"
                             border="0" />
                    </a>

                    <div tal:content="item/relative_time"
                         tal:attributes="title python:here.toLocalizedTime(item['time'], long_format=True)"
                         class="journal-item-time discreet" />

                    <div tal:content="item/action"
                         i18n:translate=""
                         i18n:domain="plone"
                         class="journal-item-action" />

                    <div tal:content="item/comment"
                         class="journal-item-comment discreet" />

                    <span class="clearfix"><!-- --></span>
                </div>
            </div>
        </div>

        <div class="preview">
            <iframe tal:attributes="src view/get_preview_pdf_url"></iframe>
        </div>

    </body>
</html>
