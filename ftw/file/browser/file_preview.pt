<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      i18n:domain="ftw.file"
      tal:define="resource string:${here/portal_url}/++resource++ftw.file.resources">

    <head>
        <link rel="stylesheet" type="text/css" media="screen"
              href="https://fast.fonts.net/cssapi/05ba7042-9884-4870-9fe8-095c4f2e9cc6.css" />
        <link rel="stylesheet" type="text/css" media="screen"
              href="++resource++ftw.file.resources/file_preview.css"/>
    </head>

    <body>

        <div class="sidebar">
            <div class="file-details"
                 tal:define="file_info view/get_file_info;
                             actions view/actions">

                <!-- Detail information -->
                <h3  tal:content="here/Title">Title</h3>
                <div class="filedata discreet">
                    <span tal:content="file_info/mimetype_title" />
                    &mdash;
                    <span tal:content="file_info/filesize" />
                </div>

                <div class="discreet"
                     i18n:translate="file_metadata_dates">
                    Modified
                    <span tal:replace="python:here.toLocalizedTime(context.modified())"
                          i18n:name="file_metadata_modified" />,
                    created
                    <span tal:replace="python:here.toLocalizedTime(context.created())"
                          i18n:name="file_metadata_created" />
                </div>
                <!-- End detail information -->

                <!-- Edit Actions -->
                <tal:actions repeat="action view/actions">
                    <a tal:attributes="href action/url; target action/target; class action/cssclass">
                        <tal:image condition="action/image">
                            <img tal:attributes="src action/image/src;
                                                 title action/image/title;
                                                 alt action/image/alt;
                                                 class action/image/cssclass" />
                             </tal:image>
                        <span tal:content="action/text">link text</span>
                    </a>
                </tal:actions>
                <!-- End actions -->
            </div>

            <div class="journal">
                <b i18n:translate="file_metadata_journal_heading">Journal</b>
                <div class="journalListing">
                    <tal:journal repeat="item view/get_journal">
                        <div class="journal-item">
                            <a class="journal-item-link" tal:omit-tag="not:item/downloadable_version" tal:attributes="href string:${context/absolute_url}/version_preview?version_id=${item/version_id}">
                                <div class="journal-version-preview-image" tal:condition="item/downloadable_version">
                                    <img tal:attributes="src python:view.get_version_preview_image_url(item.get('version_id'))" />
                                </div>
                                <div tal:content="item/action" i18n:translate="" i18n:domain="plone"
                                     class="journal-item-action">
                                </div>
                                <div class="journal-item-time discreet"
                                     i18n:translate="file_preview_time_and_actor">
                                     <span tal:attributes="title python:here.toLocalizedTime(item['time'], long_format=True)"tal:replace="item/relative_time" i18n:name="file_preview_relative_time" /> by
                                     <span tal:replace="item/actor/fullname" i18n:name="file_preview_modified_by" />:
                                </div>
                                <div tal:content="item/comment"
                                     class="journal-item-comment discreet">
                                </div>

                                <span class="clearfix"><!-- --></span>
                            </a>
                        </div>
                    </tal:journal>
                </div>
            </div>
        </div>

        <div class="preview">
            <iframe tal:attributes="src view/get_preview_pdf_url"></iframe>
        </div>

    </body>
</html>
